<html><head><meta http-equiv="Content-Type" content="text/html; charset=ANSI_X3.4-1968"><title>ioctl VIDIOC_G_DV_TIMINGS, VIDIOC_S_DV_TIMINGS</title><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"><link rel="home" href="index.html" title="LINUX MEDIA INFRASTRUCTURE API"><link rel="up" href="user-func.html" title="Appendix&#160;A.&#160;Function Reference"><link rel="prev" href="vidioc-g-ctrl.html" title="ioctl VIDIOC_G_CTRL, VIDIOC_S_CTRL"><link rel="next" href="vidioc-g-edid.html" title="ioctl VIDIOC_G_EDID, VIDIOC_S_EDID"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">ioctl VIDIOC_G_DV_TIMINGS, VIDIOC_S_DV_TIMINGS</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="vidioc-g-ctrl.html">Prev</a>&#160;</td><th width="60%" align="center">Appendix&#160;A.&#160;Function Reference</th><td width="20%" align="right">&#160;<a accesskey="n" href="vidioc-g-edid.html">Next</a></td></tr></table><hr></div><div class="refentry" title="ioctl VIDIOC_G_DV_TIMINGS, VIDIOC_S_DV_TIMINGS"><a name="vidioc-g-dv-timings"></a><div class="titlepage"></div><div class="refnamediv"><h2>Name</h2><p>VIDIOC_G_DV_TIMINGS, VIDIOC_S_DV_TIMINGS &#8212; Get or set DV timings for input or output</p></div><div class="refsynopsisdiv" title="Synopsis"><h2>Synopsis</h2><div class="funcsynopsis"><table border="0" summary="Function synopsis" cellspacing="0" cellpadding="0" class="funcprototype-table"><tr><td><code class="funcdef">int <b class="fsfunc">ioctl</b>(</code></td><td>int <var class="pdparam">fd</var>, </td></tr><tr><td>&#160;</td><td>int <var class="pdparam">request</var>, </td></tr><tr><td>&#160;</td><td>struct v4l2_dv_timings *<var class="pdparam">argp</var><code>)</code>;</td></tr></table><div class="funcprototype-spacer">&#160;</div></div></div><div class="refsect1" title="Arguments"><a name="idp19807896"></a><h2>Arguments</h2><div class="variablelist"><dl><dt><span class="term"><em class="parameter"><code>fd</code></em></span></dt><dd><p>File descriptor returned by <a class="link" href="func-open.html" title="V4L2 open()"><code class="function">open()</code></a>.</p></dd><dt><span class="term"><em class="parameter"><code>request</code></em></span></dt><dd><p>VIDIOC_G_DV_TIMINGS, VIDIOC_S_DV_TIMINGS</p></dd><dt><span class="term"><em class="parameter"><code>argp</code></em></span></dt><dd><p></p></dd></dl></div></div><div class="refsect1" title="Description"><a name="idp19812008"></a><h2>Description</h2><p>To set DV timings for the input or output, applications use the
<code class="constant">VIDIOC_S_DV_TIMINGS</code> ioctl and to get the current timings,
applications use the <code class="constant">VIDIOC_G_DV_TIMINGS</code> ioctl. The detailed timing
information is filled in using the structure struct&#160;<a class="link" href="vidioc-g-dv-timings.html#v4l2-dv-timings" title="Table&#160;A.57.&#160;struct v4l2_dv_timings">v4l2_dv_timings</a>. These ioctls take
a pointer to the struct&#160;<a class="link" href="vidioc-g-dv-timings.html#v4l2-dv-timings" title="Table&#160;A.57.&#160;struct v4l2_dv_timings">v4l2_dv_timings</a> structure as argument. If the ioctl is not supported
or the timing values are not correct, the driver returns <span class="errorcode">EINVAL</span> error code.</p><p>The <code class="filename">linux/v4l2-dv-timings.h</code> header can be used to get the
timings of the formats in the <a class="xref" href="bi01.html#cea861" title="A DTV Profile for Uncompressed High Speed Digital Interfaces">[<abbr class="abbrev">CEA-861-E</abbr>]</a> and <a class="xref" href="bi01.html#vesadmt" title="VESA and Industry Standards and Guidelines for Computer Display Monitor Timing (DMT)">[<abbr class="abbrev">VESA&#160;DMT</abbr>]</a>
standards. If the current input or output does not support DV timings (e.g. if
<a class="link" href="vidioc-enuminput.html" title="ioctl VIDIOC_ENUMINPUT"><code class="constant">VIDIOC_ENUMINPUT</code></a> does not set the <code class="constant">V4L2_IN_CAP_DV_TIMINGS</code> flag), then
<span class="errorcode">ENODATA</span> error code is returned.</p></div><div class="refsect1" title="Return Value"><a name="idp19817328"></a><h2>Return Value</h2><p>On success <span class="returnvalue">0</span> is returned, on error <span class="returnvalue">-1</span> and the <code class="varname">errno</code> variable is set appropriately. The generic error codes are described at the <a class="link" href="gen_errors.html#gen-errors" title="Table&#160;19.1.&#160;Generic error codes">Generic Error Codes</a> chapter.</p><div class="variablelist"><dl><dt><span class="term"><span class="errorcode">EINVAL</span></span></dt><dd><p>This ioctl is not supported, or the
<code class="constant">VIDIOC_S_DV_TIMINGS</code> parameter was unsuitable.</p></dd><dt><span class="term"><span class="errorcode">ENODATA</span></span></dt><dd><p>Digital video timings are not supported for this input or output.</p></dd><dt><span class="term"><span class="errorcode">EBUSY</span></span></dt><dd><p>The device is busy and therefore can not change the timings.</p></dd></dl></div><div class="table"><a name="v4l2-bt-timings"></a><p class="title"><b>Table&#160;A.56.&#160;struct <span class="structname">v4l2_bt_timings</span></b></p><div class="table-contents"><table summary="struct v4l2_bt_timings" width="100%" border="0"><colgroup><col><col><col></colgroup><tbody valign="top"><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>width</code></em></td><td valign="top">Width of the active video in pixels.</td></tr><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>height</code></em></td><td valign="top">Height of the active video frame in lines. So for interlaced formats the
	    height of the active video in each field is <em class="structfield"><code>height</code></em>/2.</td></tr><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>interlaced</code></em></td><td valign="top">Progressive (0) or interlaced (1)</td></tr><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>polarities</code></em></td><td valign="top">This is a bit mask that defines polarities of sync signals.
bit 0 (V4L2_DV_VSYNC_POS_POL) is for vertical sync polarity and bit 1 (V4L2_DV_HSYNC_POS_POL) is for horizontal sync polarity. If the bit is set
(1) it is positive polarity and if is cleared (0), it is negative polarity.</td></tr><tr><td valign="top">__u64</td><td valign="top"><em class="structfield"><code>pixelclock</code></em></td><td valign="top">Pixel clock in Hz. Ex. 74.25MHz-&gt;74250000</td></tr><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>hfrontporch</code></em></td><td valign="top">Horizontal front porch in pixels</td></tr><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>hsync</code></em></td><td valign="top">Horizontal sync length in pixels</td></tr><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>hbackporch</code></em></td><td valign="top">Horizontal back porch in pixels</td></tr><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>vfrontporch</code></em></td><td valign="top">Vertical front porch in lines. For interlaced formats this refers to the
	    odd field (aka field 1).</td></tr><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>vsync</code></em></td><td valign="top">Vertical sync length in lines. For interlaced formats this refers to the
	    odd field (aka field 1).</td></tr><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>vbackporch</code></em></td><td valign="top">Vertical back porch in lines. For interlaced formats this refers to the
	    odd field (aka field 1).</td></tr><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>il_vfrontporch</code></em></td><td valign="top">Vertical front porch in lines for the even field (aka field 2) of
	    interlaced field formats. Must be 0 for progressive formats.</td></tr><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>il_vsync</code></em></td><td valign="top">Vertical sync length in lines for the even field (aka field 2) of
	    interlaced field formats. Must be 0 for progressive formats.</td></tr><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>il_vbackporch</code></em></td><td valign="top">Vertical back porch in lines for the even field (aka field 2) of
	    interlaced field formats. Must be 0 for progressive formats.</td></tr><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>standards</code></em></td><td valign="top">The video standard(s) this format belongs to. This will be filled in by
	    the driver. Applications must set this to 0. See <a class="xref" href="vidioc-g-dv-timings.html#dv-bt-standards" title="Table&#160;A.59.&#160;DV BT Timing standards">Table&#160;A.59, &#8220;DV BT Timing standards&#8221;</a>
	    for a list of standards.</td></tr><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>flags</code></em></td><td valign="top">Several flags giving more information about the format.
	    See <a class="xref" href="vidioc-g-dv-timings.html#dv-bt-flags" title="Table&#160;A.60.&#160;DV BT Timing flags">Table&#160;A.60, &#8220;DV BT Timing flags&#8221;</a> for a description of the flags.
	    </td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="v4l2-dv-timings"></a><p class="title"><b>Table&#160;A.57.&#160;struct <span class="structname">v4l2_dv_timings</span></b></p><div class="table-contents"><table summary="struct v4l2_dv_timings" width="100%" border="0"><colgroup><col><col><col><col></colgroup><tbody valign="top"><tr><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>type</code></em></td><td valign="top">&#160;</td><td valign="top">Type of DV timings as listed in <a class="xref" href="vidioc-g-dv-timings.html#dv-timing-types" title="Table&#160;A.58.&#160;DV Timing types">Table&#160;A.58, &#8220;DV Timing types&#8221;</a>.</td></tr><tr><td valign="top">union</td><td valign="top"><em class="structfield"><code></code></em></td><td valign="top">&#160;</td><td class="auto-generated">&#160;</td></tr><tr><td valign="top">&#160;</td><td valign="top">struct&#160;<a class="link" href="vidioc-g-dv-timings.html#v4l2-bt-timings" title="Table&#160;A.56.&#160;struct v4l2_bt_timings">v4l2_bt_timings</a></td><td valign="top"><em class="structfield"><code>bt</code></em></td><td valign="top">Timings defined by BT.656/1120 specifications</td></tr><tr><td valign="top">&#160;</td><td valign="top">__u32</td><td valign="top"><em class="structfield"><code>reserved</code></em>[32]</td><td valign="top">&#160;</td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="dv-timing-types"></a><p class="title"><b>Table&#160;A.58.&#160;DV Timing types</b></p><div class="table-contents"><table summary="DV Timing types" width="100%" border="0"><colgroup><col><col><col></colgroup><tbody valign="top"><tr><td valign="top">Timing type</td><td valign="top">value</td><td valign="top">Description</td></tr><tr><td valign="top">&#160;</td><td valign="top">&#160;</td><td valign="top">&#160;</td></tr><tr><td valign="top">V4L2_DV_BT_656_1120</td><td valign="top">0</td><td valign="top">BT.656/1120 timings</td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="dv-bt-standards"></a><p class="title"><b>Table&#160;A.59.&#160;DV BT Timing standards</b></p><div class="table-contents"><table summary="DV BT Timing standards" width="100%" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td valign="top">Timing standard</td><td valign="top">Description</td></tr><tr><td valign="top">&#160;</td><td valign="top">&#160;</td></tr><tr><td valign="top">V4L2_DV_BT_STD_CEA861</td><td valign="top">The timings follow the CEA-861 Digital TV Profile standard</td></tr><tr><td valign="top">V4L2_DV_BT_STD_DMT</td><td valign="top">The timings follow the VESA Discrete Monitor Timings standard</td></tr><tr><td valign="top">V4L2_DV_BT_STD_CVT</td><td valign="top">The timings follow the VESA Coordinated Video Timings standard</td></tr><tr><td valign="top">V4L2_DV_BT_STD_GTF</td><td valign="top">The timings follow the VESA Generalized Timings Formula standard</td></tr></tbody></table></div></div><br class="table-break"><div class="table"><a name="dv-bt-flags"></a><p class="title"><b>Table&#160;A.60.&#160;DV BT Timing flags</b></p><div class="table-contents"><table summary="DV BT Timing flags" width="100%" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td valign="top">Flag</td><td valign="top">Description</td></tr><tr><td valign="top">&#160;</td><td valign="top">&#160;</td></tr><tr><td valign="top">V4L2_DV_FL_REDUCED_BLANKING</td><td valign="top">CVT/GTF specific: the timings use reduced blanking (CVT) or the 'Secondary
GTF' curve (GTF). In both cases the horizontal and/or vertical blanking
intervals are reduced, allowing a higher resolution over the same
bandwidth. This is a read-only flag, applications must not set this.
	    </td></tr><tr><td valign="top">V4L2_DV_FL_CAN_REDUCE_FPS</td><td valign="top">CEA-861 specific: set for CEA-861 formats with a framerate that is a multiple
of six. These formats can be optionally played at 1 / 1.001 speed to
be compatible with 60 Hz based standards such as NTSC and PAL-M that use a framerate of
29.97 frames per second. If the transmitter can't generate such frequencies, then the
flag will also be cleared. This is a read-only flag, applications must not set this.
	    </td></tr><tr><td valign="top">V4L2_DV_FL_REDUCED_FPS</td><td valign="top">CEA-861 specific: only valid for video transmitters, the flag is cleared
by receivers. It is also only valid for formats with the V4L2_DV_FL_CAN_REDUCE_FPS flag
set, for other formats the flag will be cleared by the driver.

If the application sets this flag, then the pixelclock used to set up the transmitter is
divided by 1.001 to make it compatible with NTSC framerates. If the transmitter
can't generate such frequencies, then the flag will also be cleared.
	    </td></tr><tr><td valign="top">V4L2_DV_FL_HALF_LINE</td><td valign="top">Specific to interlaced formats: if set, then field 1 (aka the odd field)
is really one half-line longer and field 2 (aka the even field) is really one half-line
shorter, so each field has exactly the same number of half-lines. Whether half-lines can be
detected or used depends on the hardware.
	    </td></tr></tbody></table></div></div><br class="table-break"></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="vidioc-g-ctrl.html">Prev</a>&#160;</td><td width="20%" align="center"><a accesskey="u" href="user-func.html">Up</a></td><td width="40%" align="right">&#160;<a accesskey="n" href="vidioc-g-edid.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">ioctl VIDIOC_G_CTRL, VIDIOC_S_CTRL&#160;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&#160;ioctl VIDIOC_G_EDID, VIDIOC_S_EDID</td></tr></table></div></body></html>
